<main class="container">
  <h1>show page for <%= @question.title %> </h1>
  <!-- Question-->
  Question vote count: <%= @question.vote_count %> <br>
  <%= @question.content %>
  <% @question.tags.each do |tag| %>
    <br><a href="/tags/<%= tag.id %>"><%= tag.name %></a>
  <% end %>
  <%= @question.created_at %>
  <%= @question.user.username %>
  <form method="post" action="/questions/<%=@question.id %>/comments">
    <textarea rows="4" cols="50" name="content"></textarea> <br />
    <input type="submit" value="Comment" >
  </form>
  <!-- Comments -->
  <% @question.comments.each do |comment| %>
    <br><%= comment.content %>
    <br><a href="/users/<%= comment.user.id %>"><%= comment.user.username %></a><br>
    <%= comment.created_at %> <br>
  <% end %>
  <!-- The very best answer -->
  <%if @question.best_answer?%>
  <br>Answer vote count: <%= @question.best_answer.answer_vote_count %> <br>
  <%= @question.best_answer.content %>
  <%= @question.best_answer.created_at %>
  <a href="/users/<%= @question.best_answer.user.id %>"><%= @question.best_answer.user.username %></a>
  <%end%>
  <!-- answer -->

  <% @question.answers.each do |answer| %>
    <%unless answer.best_answer?(@question.best_answer.id)%>
    <br>Answer vote count: <%= answer.answer_vote_count %> <br>
    <%= answer.content %>
    <%= answer.created_at %>
    <a href="/users/<%= answer.user.id %>"><%= answer.user.username %></a>
    <br><br>


    <% answer.comments.each do |comment| %>
      Comment:<br><%= comment.content %>
      <br><a href="/users/<%= comment.user.id %>"><%= comment.user.username %></a><br>
      <%= comment.created_at %> <br>
    <% end %>


    <form method="POST" action="/questions/<%= @question.id %>/answers/<%= answer.id %>/comment">
      <textarea rows="4" cols="50" name="content"></textarea> <br />
      <input type="submit" value="Comment" >
    </form>
    <%end%>
  <%end%>
<!-- the very best answer will be interpolated appropriately, but then it needs to add a css class of 'hidden' to it when we come back with the jquery stuff. -->

  <form method="POST" action="/questions/<%= @question.id %>/answer">
    <textarea rows="4" cols="50" name="content"></textarea> <br />
    <input type="submit" value="Answer" >

  </form>



</main>
